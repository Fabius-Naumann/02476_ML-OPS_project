# W&B sweep configuration for Hydra-based training (src/sign_ml/train.py)
#
# Create sweep:
#   uv run wandb sweep configs/sweep.yaml
# Run agent:
#   uv run wandb agent <sweep_id>

program: src/sign_ml/train.py
name: hparam-sweep # name of the sweep
method: bayes

metric:
  name: val/accuracy # the name of the metric to optimize
  goal: maximize

parameters:
  # Note: these parameter names are Hydra override keys.
  experiment.optimizer.lr:
    distribution: log_uniform_values
    min: !!float 1e-4
    max: !!float 1e-2
  experiment.training.batch_size:
    values: [32, 64, 128]
  experiment.training.epochs:
    values: [5, 10, 15]

run_cap: 5 # the max number of runs for the sweep

command:
  - ${env}
  - ${interpreter}
  - ${program}
  - experiment=exp1
  # Important for Hydra: pass overrides as `key=value` (no leading `--`).
  - ${args_no_hyphens}
